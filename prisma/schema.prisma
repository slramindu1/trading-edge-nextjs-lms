generator client {
  provider = "prisma-client-js"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                String   @id @default(uuid())
  email             String   @unique
  fname             String?
  lname             String?
  password          String
  mobile            String?
  joined_date       DateTime @default(now())
  verification_code String?
  gender_id         Int
  user_type_id      Int
  status_id         Int
  aboutMe           String?  @db.VarChar(500)

  // NEW â†’ Track Free or Paid
  student_type      StudentType @default(FREE)
}

enum StudentType {
  FREE
  PAID
}

model Section {
  id               String       @id @default(uuid())
  title            String
  description      String
  dateCreated      DateTime     @default(now())
  fileKey          String
  smallDescription String
  slug             String       @unique
  status           CourseStatus @default(Draft)

  chapters Chapter[]
}

enum CourseStatus {
  Draft
  Published
  Archived
}

model Chapter {
  id        String    @id @default(uuid())
  title     String
  position  Int
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  section   Section   @relation(fields: [sectionId], references: [id], onDelete: Cascade)
  sectionId String

  lessons Lesson[]
}

model Lesson {
  id           String   @id @default(uuid())
  title        String
  description  String?
  thumbnailUrl String?
  videoUrl     String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  chapter      Chapter  @relation(fields: [chapterId], references: [id], onDelete: Cascade)
  chapterId    String

  position     Int
}
